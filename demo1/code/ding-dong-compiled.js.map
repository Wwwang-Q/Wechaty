{"version":3,"sources":["ding-dong.js"],"names":[],"mappings":";;;;;;AAgBA;;;;;;AAhBA;;;AAGA;;;;;;;;;AASA;AACA,IAAM,iBAAkB,QAAQ,iBAAR,CAAxB;AACA;;AASA,IAAM,orBAAN;;AAuBA,QAAQ,GAAR,CAAY,OAAZ;AACA,IAAM,MAAM,iBAAQ,QAAR,CAAiB,EAAE,SAAS,gBAAO,eAAlB,EAAjB,CAAZ;;AAEA,IACK,EADL,CACQ,QADR,EACmB;AAAA,WAAQ,aAAI,IAAJ,CAAS,KAAT,EAAmB,KAAK,IAAL,EAAnB,eAAR;AAAA,CADnB,EAEK,EAFL,CAEQ,OAFR,EAEoB,gBAAQ;AACpB,iBAAI,IAAJ,CAAS,KAAT,EAAmB,KAAK,IAAL,EAAnB;AACA,QAAI,GAAJ,CAAQ,eAAR;AACH,CALL,EAMK,EANL,CAMQ,OANR,EAMoB,aAAK;AACjB,iBAAI,IAAJ,CAAS,KAAT,EAAgB,WAAhB,EAA6B,CAA7B;AACA,QAAI,GAAJ,CAAQ,oBAAoB,EAAE,OAA9B;AACH,CATL,EAUK,EAVL,CAUQ,MAVR,EAUgB,UAAC,GAAD,EAAM,IAAN,EAAe;AACvB,QAAI,CAAC,UAAU,IAAV,CAAe,OAAO,IAAP,CAAf,CAAL,EAAmC;AAC/B,YAAM,WAAW,IAAI,OAAJ,CAAY,YAAZ,EAA0B,KAA1B,CAAjB;AACA,uBAAe,QAAf,CAAwB,QAAxB;AACH;AACD,YAAQ,GAAR,CAAe,GAAf,WAAwB,IAAxB;AACH,CAhBL,EAiBK,EAjBL,CAiBQ,SAjBR;AAAA,4DAiBmB,iBAAM,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAED,4BAFC,GAEM,EAAE,IAAF,EAFN;;AAGP,gCAAQ,GAAR,CAAY,CAAC,OAAO,MAAM,KAAK,KAAL,EAAN,GAAqB,GAA5B,GAAkC,EAAnC,IACN,GADM,GACA,EAAE,IAAF,GAAS,IAAT,EADA,GACkB,GADlB,GAEN,GAFM,GAEA,EAAE,cAAF,EAFZ;;AAHO,8BAQH,2BAA2B,IAA3B,CAAgC,EAAE,OAAF,EAAhC,KAAgD,CAAC,EAAE,IAAF,EAR9C;AAAA;AAAA;AAAA;;AASH,0BAAE,GAAF,CAAM,MAAN;AACA,qCAAI,IAAJ,CAAS,KAAT,EAAgB,aAAhB;;AAEM,mCAZH,GAYkB,oSAZlB;AAAA;AAAA,+BAgBG,EAAE,GAAF,CAAM,WAAN,CAhBH;;AAAA;AAAA;AAAA,+BAiBG,EAAE,GAAF,CAAM,0BAAiB,wBAAjB,CAAN,CAjBH;;AAAA;AAAA;AAAA,+BAkBG,EAAE,GAAF,CAAM,iGAAN,CAlBH;;AAAA;AAmBH,qCAAI,IAAJ,CAAS,KAAT,EAAgB,cAAhB;;AAnBG;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAsBP,qCAAI,KAAJ,CAAU,KAAV,EAAiB,2BAAjB;;AAtBO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAjBnB;;AAAA;AAAA;AAAA;AAAA;;AA2CA,IAAI,IAAJ,GACK,KADL,CACW,aAAK;AACR,iBAAI,KAAJ,CAAU,KAAV,EAAiB,iBAAjB,EAAoC,CAApC;AACA,QAAI,IAAJ;AACA,YAAQ,IAAR,CAAa,CAAC,CAAd;AACH,CALL;;AAOA;AACA;AACA;AACA;AACA","file":"ding-dong-compiled.js","sourcesContent":["/**\n * Created by wangqi on 2017/5/17.\n */\n/**\n *\n * Wechaty - Wechat for Bot\n *\n * Connecting ChatBots\n * https://github.com/wechaty/wechaty\n *\n */\n\n/* tslint:disable:variable-name */\nconst QrcodeTerminal  = require('qrcode-terminal')\n//const finis           = require('finis')\n\nimport {\n    Config,\n    Wechaty,\n    log,\n    MediaMessage,\n} from 'wechaty'\n\nconst welcome = `\n| __        __        _           _\n| \\\\ \\\\      / /__  ___| |__   __ _| |_ _   _\n|  \\\\ \\\\ /\\\\ / / _ \\\\/ __| '_ \\\\ / _\\` | __| | | |\n|   \\\\ V  V /  __/ (__| | | | (_| | |_| |_| |\n|    \\\\_/\\\\_/ \\\\___|\\\\___|_| |_|\\\\__,_|\\\\__|\\\\__, |\n|                                     |___/\n\n=============== Powered by Wechaty ===============\n-------- https://github.com/zixia/wechaty --------\n\nI'm a bot, my super power is talk in Wechat.\n\nIf you send me a 'ding', I will reply you a 'dong'!\n__________________________________________________\n\nHope you like it, and you are very welcome to\nupgrade me for more super powers!\n\nPlease wait... I'm trying to login in...\n\n`\n\nconsole.log(welcome)\nconst bot = Wechaty.instance({ profile: Config.DEFAULT_PROFILE })\n\nbot\n    .on('logout'\t, user => log.info('Bot', `${user.name()} logouted`))\n    .on('login'\t  , user => {\n        log.info('Bot', `${user.name()} logined`)\n        bot.say('Wechaty login')\n    })\n    .on('error'   , e => {\n        log.info('Bot', 'error: %s', e)\n        bot.say('Wechaty error: ' + e.message)\n    })\n    .on('scan', (url, code) => {\n        if (!/201|200/.test(String(code))) {\n            const loginUrl = url.replace(/\\/qrcode\\//, '/l/')\n            QrcodeTerminal.generate(loginUrl)\n        }\n        console.log(`${url}\\n[${code}] Scan QR Code in above url to login: `)\n    })\n    .on('message', async m => {\n        try {\n            const room = m.room()\n            console.log((room ? '[' + room.topic() + ']' : '')\n                + '<' + m.from().name() + '>'\n                + ':' + m.toStringDigest(),\n            )\n\n            if (/^(ding|ping|bing|code)$/i.test(m.content()) && !m.self()) {\n                m.say('dong')\n                log.info('Bot', 'REPLY: dong')\n\n                const joinWechaty =  `Join Wechaty Developers' Community\\n\\n` +\n                    `Wechaty is used in many ChatBot projects by hundreds of developers.\\n\\n` +\n                    `If you want to talk with other developers, just scan the following QR Code in WeChat with secret code: wechaty,\\n\\n` +\n                    `you can join our Wechaty Developers' Home at once`\n                await m.say(joinWechaty)\n                await m.say(new MediaMessage('../image/BotQrcode.png'))\n                await m.say('Scan now, because other Wechaty developers want to talk with you too!\\n\\n(secret code: wechaty)')\n                log.info('Bot', 'REPLY: Image')\n            }\n        } catch (e) {\n            log.error('Bot', 'on(message) exception: %s' , e)\n        }\n    })\n\nbot.init()\n    .catch(e => {\n        log.error('Bot', 'init() fail: %s', e)\n        bot.quit()\n        process.exit(-1)\n    })\n\n// finis((code, signal) => {\n//     const exitMsg = `Wechaty exit ${code} because of ${signal} `\n//     console.log(exitMsg)\n//     bot.say(exitMsg)\n// })"]}